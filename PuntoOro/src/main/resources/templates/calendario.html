<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto de Oro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="css/StyleMenu.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js" defer></script>
    <script src="js/init.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('modal');
            const eventForm = document.getElementById('event-form');
            const btnCerrar = document.getElementById('btn-login-cerrar');
            let calendar;

            // Inicialización del calendario
            var calendarEl = document.getElementById('calendar');
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                selectable: true,
                select: function(info) {
                    // Mostrar el formulario en el modal al seleccionar una fecha
                    modal.showModal();
                    document.getElementById('event-start').value = info.startStr;
                    document.getElementById('event-end').value = info.endStr;
                },
                eventClick: function(info) {
                    alert('Evento: ' + info.event.title); // Muestra alerta al hacer clic en un evento
                }
            });

            calendar.render(); // Renderiza el calendario

            // Manejar el cierre del modal
            btnCerrar.addEventListener('click', function() {
                modal.close();
            });

            // Manejar el envío del formulario para agregar un evento
            eventForm.addEventListener('submit', function(e) {
                e.preventDefault(); // Prevenir el comportamiento por defecto del formulario

                const title = document.getElementById('event-title').value;
                const start = document.getElementById('event-start').value;
                const end = document.getElementById('event-end').value;

                calendar.addEvent({
                    title: title,
                    start: start,
                    end: end,
                    allDay: true
                });

                modal.close(); // Cerrar el modal
                eventForm.reset(); // Reiniciar el formulario
            });
        });
    </script>
</head>

<body>
    <header>
        <nav class="header-container">
            <ul class="main-menu">
                <li>Calendario</li>
                <li>Jugadores</li>
                <li>Ranking</li>
            </ul>
            <ul class="head-btn-sesion">
                <li><img class="imghead" src="/images/PelotaPadel.png" alt="PelotaPadel"></li>
                <li><a href="#">Mi cuenta</a>
                    <ul class="submenu">
                        <li><a href="#">Datos</a></li>
                        <li><a href="#">Cambiar Contraseña</a></li>
                        <li><a href="#">Configuracion de Cancha</a></li>
                        <li><a href="#">Configuracion de Torneo</a></li>
                        <li><a href="#">Configuración de Usuarios</a></li>
                        <li><a href="#">Cerrar Sesión</a></li>
                    </ul>
                </li>
            </ul>
        </nav>

        <div id='calendar'></div>
        <dialog id="modal">
            <h2>Agregar Evento</h2>
            <form id="event-form">
                <label for="event-title">Título del Evento:</label>
                <input type="text" id="event-title" required>

                <label for="event-start">Fecha de Inicio:</label>
                <input type="datetime-local" id="event-start" required>

                <label for="event-end">Fecha de Fin:</label>
                <input type="datetime-local" id="event-end">

                <button type="submit">Agregar Evento</button>
            </form>
            <button id="btn-login-cerrar">Cerrar</button>
        </dialog>
    </header>

    <main></main>

    <footer class="site-footer">
        <div class="footer-logo" translate="no">Punto de Oro Bragado</div>
        <div class="footer-links">
            <ul>
                <a href="#" onclick="redireccionIndex()"></a>
                <a href="#" onclick="redireccionJuego()"></a>
                <a href="#" onclick="redireccionPAlabra()"></a>
            </ul>
        </div>
        <div class="footer-social">
            <a href="#" class="social-link"><img class="social-link-facebook" src="/images/facebook.png"></a>
            <a href="#" class="social-link"><img class="social-link-twitter" src="/images/twitter.png"></a>
            <a href="#" target="_blank" class="social-link"><img class="social-link-instgram" src="/images/instagram.png"></a>
        </div>
        <p id="Copyright"></p>
    </footer>
</body>
</html>
